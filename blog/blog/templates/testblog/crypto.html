{% extends "base.html" %}

{% load static wagtailcore_tags base_tags %}


{% block content %}

    {% csrf_token %} 

    <script defer src="{% static 'js/ajax.js' %}"></script>

    <section class="title_with_selection">    

        <div class="crypto_title_select">

            Crypto Services

        </div>
        
        <select class="select_sorting" onchange="postCrypto(this)">
            <option value='-first_published_at'>sort by default</option>
            <option value="-popularity">sort by popularity</option>
            <option value="title">sort by title</option>
            <option value="-date">sort by date</option>
        </select>

    </section>
    
    {% TagsSection_tag %}

    {% CryptoCardsSection_tag maxCards="10" showTitle=False %}

    
    {% if blogpages.paginator.num_pages > 1 %}
    
        <div class="pagination_container">
        
            {% if blogpages.has_previous %}
                <li class="page-item">
                    <a class="standard_button arrow-page" href="?page={{ blogpages.previous_page_number }}" class="page-link">
                        <svg class="svg_arrow rotate">
                            <use 
                              href="{% static "icons/arrow_right.svg" %}#idsvg_arrow"
                            >
                            </use>
                        </svg>
                        <span>Previous Page </span>
                    </a>
                </li>
            {% endif %}

            <div class="pageitems_container">

                {% for page_num in page_range %}

                    {% if blogpages.number == page_num %}

                    <li class="page-item">
                        <a class="standard_button current" href="?page={{ page_num }}" class="page-link">
                            {{ page_num }}
                        </a>
                    </li>  
                    
                    {% else %}

                        {% if page_num == blogpages.paginator.ELLIPSIS %}
                            <li class="page-item">
                                <span class="standard_button" class="page-link">{{ page_num }}</span>
                            </li>
                        {% else %}
                            <li class="page-item">
                                <a class="standard_button" href="?page={{ page_num }}" class="page-link">
                                    {{ page_num }}
                                </a>
                            </li> 
                        {% endif %}

                    {% endif %}
                    

                {% endfor %}
 

            </div>

            {% if blogpages.has_next %}
                <li class="page-item">
                    <a class="standard_button arrow-page" href="?page={{ blogpages.next_page_number }}" class="page-link">
                        <span>Next Page </span>
                        <svg class="svg_arrow">
                            <use 
                              href="{% static "icons/arrow_right.svg" %}#idsvg_arrow"
                            >
                            </use>
                        </svg>
                    </a>
                </li>
            {% endif %}


            {% comment %} {% for i in page_range|default_if_none:blogpages.paginator.get_elided_page_range %}

                <li class="page-item"><span class="page-link">{{ i }}</span></li>
            
            {% endfor %} {% endcomment %}



        </div>

    {% endif %}


    {% your_add_here_tag %}

{% endblock content %}